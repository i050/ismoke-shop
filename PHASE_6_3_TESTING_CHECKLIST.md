# 🧪 Phase 6.3 - Testing Checklist (רשימת בדיקות)

## 📅 תאריך: 26 אוקטובר 2025
## 🎯 מטרה: בדיקה מקיפה של ProductForm ו-Redux Integration

---

## ✅ **Pre-Testing: בדיקות לפני הרצה**

### 1. ✅ בדיקת TypeScript Errors
- [x] אין שגיאות ב-client/src
- [x] אין שגיאות ב-ProductForm components
- [x] אין שגיאות ב-Redux slice
- [x] אין שגיאות ב-Service layer

### 2. ✅ בדיקת שרתים רצים
- [x] Server Backend רץ (port 3000)
- [x] Client Vite רץ (port 5173)
- [x] 5 תהליכי Node פעילים

---

## 🎬 **Phase 6.3.1: בדיקת UI Flow (ללא שרת)**

### **A. פתיחת דף ניהול מוצרים**

**צעדים:**
1. פתח דפדפן: `http://localhost:5173`
2. התחבר כ-Admin
3. נווט לדף: `/admin/products`

**תוצאות צפויות:**
- ✅ הדף נטען ללא שגיאות
- ✅ רשימת מוצרים מוצגת (18 מוצרים)
- ✅ כפתור "הוסף מוצר" גלוי
- ✅ חיפוש ופילטרים עובדים

**בדיקה בקונסול:**
```javascript
// פתח DevTools Console (F12)
// בדוק שאין שגיאות אדומות
// בדוק שיש לוגים:
// "📦 טוען מוצרים..."
// "✅ מוצרים נטענו: 18"
```

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **B. פתיחת טופס יצירת מוצר**

**צעדים:**
1. לחץ על כפתור "הוסף מוצר"

**תוצאות צפויות:**
- ✅ ProductForm נפתח במצב create
- ✅ 6 טאבים מוצגים: בסיסי, מחירים, מלאי, תמונות, קטגוריות, SKUs
- ✅ Progress Bar מוצג (0%)
- ✅ כפתורים: "שמור", "ביטול"

**בדיקה בקונסול:**
```javascript
// צריך לראות:
// "🆕 פתיחת טופס יצירת מוצר חדש"
// Redux State: mode === 'create'
```

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **C. בדיקת Section 1: מידע בסיסי**

**צעדים:**
1. מלא שדה "שם מוצר": "מוצר בדיקה"
2. מלא "תיאור": "תיאור קצר לבדיקה"
3. מלא "מותג": "מותג בדיקה"

**תוצאות צפויות:**
- ✅ שדות מתמלאים בצורה חלקה
- ✅ Character counter מתעדכן (תיאור: 23/2000)
- ✅ Progress bar עולה (שם מוצר הוא required)
- ✅ אין שגיאות validation

**בדיקת Validation:**
1. נסה למחוק את שם המוצר
2. לחץ מחוץ לשדה (blur)

**צפוי:**
- ✅ שגיאה אדומה: "שם המוצר הוא שדה חובה"

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **D. בדיקת Section 2: מחירים**

**צעדים:**
1. עבור לטאב "מחירים"
2. מלא "מחיר בסיס": 100
3. מלא "מחיר השוואה": 150

**תוצאות צפויות:**
- ✅ חישוב אוטומטי: "הנחה: 33%"
- ✅ תצוגה ויזואלית של ההנחה
- ✅ Progress bar עולה (מחיר בסיס הוא required)

**בדיקת Validation:**
1. נסה להזין מחיר השוואה נמוך ממחיר בסיס (למשל 80)

**צפוי:**
- ✅ שגיאה: "מחיר השוואה חייב להיות גבוה ממחיר הבסיס"

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **E. בדיקת Section 3: מלאי**

**צעדים:**
1. עבור לטאב "מלאי"
2. השדות צריכים להיות disabled (כי יש SKUs)

**תוצאות צפויות:**
- ✅ הודעה: "ניהול מלאי דרך SKUs בלבד"
- ✅ השדות אפורים (disabled)

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **F. בדיקת Section 4: תמונות**

**צעדים:**
1. עבור לטאב "תמונות"
2. לחץ על "העלה תמונות" או גרור תמונה

**תוצאות צפויות:**
- ✅ אזור Drag & Drop מופעל
- ✅ תמונות מוצגות בתצוגה מקדימה
- ✅ כפתור מחיקה (X) על כל תמונה
- ✅ אפשר לגרור ולשנות סדר

**⚠️ הערה:** 
בשלב זה אין העלאה אמיתית ל-Cloudinary (Phase 7).
התמונות נשמרות כ-Base64 זמני או URLs לוקליים.

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **G. בדיקת Section 5: קטגוריות**

**צעדים:**
1. עבור לטאב "קטגוריות"
2. בחר קטגוריה מהרשימה

**תוצאות צפויות:**
- ✅ עץ קטגוריות מוצג (היררכי 3 רמות)
- ✅ חיפוש קטגוריות עובד
- ✅ Breadcrumb מוצג למעלה
- ✅ Progress bar עולה (קטגוריה לא required)

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **H. בדיקת Section 6: SKUs (הכי חשוב!)**

**צעדים:**
1. עבור לטאב "SKUs"
2. לחץ "הוסף וריאנט"
3. מלא:
   - קוד SKU: "TEST-001"
   - שם: "כחול"
   - מחיר: 120 (או השאר ריק - ישתמש במחיר בסיס)
   - מלאי: 10
   - צבע: #0000FF
4. לחץ "הוסף"

**תוצאות צפויות:**
- ✅ SKU חדש מתווסף לרשימה
- ✅ סיכום מוצג: "1 וריאנט | 10 יח' במלאי"
- ✅ אפשר לערוך inline (לחיצה על השדות)
- ✅ אפשר למחוק עם כפתור X
- ✅ Progress bar עולה

**בדיקת Validation:**
1. נסה להוסיף SKU נוסף עם אותו קוד "TEST-001"

**צפוי:**
- ✅ שגיאה: "קוד SKU כבר קיים"

**בדיקת Debounce:**
1. התחל להקליד קוד SKU
2. המתן 500ms

**צפוי:**
- ✅ בדיקת ייחודיות אוטומטית (אם השרת תומך)
- ✅ אייקון ✓ או ✗ ליד השדה

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **I. בדיקת Progress Bar**

**מצב עכשיו:**
- שם מוצר: ✅
- מחיר בסיס: ✅
- תיאור: ✅ (לא required אבל ממלא)
- קטגוריה: ❌ (לא required)
- תמונות: ❌ (לא required)

**צפוי:**
- Progress: 60-80%

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **J. בדיקת Auto-Save Draft**

**צעדים:**
1. מלא כמה שדות בטופס
2. המתן 5 שניות (ללא שמירה)
3. רענן את הדף (F5)
4. לחץ "הוסף מוצר" שוב

**תוצאות צפויות:**
- ✅ Dialog: "נמצא טיוטה שנשמרה. האם לשחזר?"
- ✅ כפתורים: "שחזר", "התחל מחדש"
- ✅ לחיצה על "שחזר" - השדות חוזרים

**בדיקה ב-localStorage:**
```javascript
// פתח DevTools Console
localStorage.getItem('productFormDraft')
// צריך להחזיר JSON עם הנתונים
```

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

## 🚨 **Phase 6.3.2: בדיקת Validation (טרם שמירה)**

### **A. בדיקת Required Fields**

**צעדים:**
1. פתח טופס חדש
2. לחץ "שמור" ללא למלא כלום

**תוצאות צפויות:**
- ✅ שגיאות validation באדום:
  - "שם המוצר הוא שדה חובה"
  - "מחיר בסיס הוא שדה חובה"
- ✅ המעבר לטאב הראשון עם שגיאה
- ✅ הטופס לא נשלח

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **B. בדיקת Min/Max Values**

**צעדים:**
1. נסה למלא:
   - שם מוצר: "AB" (פחות מ-3 תווים)
   - מחיר בסיס: -50 (שלילי)
   - מלאי SKU: -10 (שלילי)

**תוצאות צפויות:**
- ✅ שגיאות validation מתאימות
- ✅ השדות מסומנים באדום

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **C. בדיקת SKU Pattern**

**צעדים:**
1. נסה להוסיף SKU עם תווים לא חוקיים:
   - "test-001" (אותיות קטנות)
   - "TEST 001" (רווח)
   - "TEST-001!" (סימן קריאה)

**תוצאות צפויות:**
- ✅ שגיאה: "קוד SKU יכול להכיל רק אותיות גדולות, מספרים ומקפים"

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

## 🔌 **Phase 6.3.3: בדיקת Backend Integration (צפויה להיכשל!)**

### **A. ניסיון שמירת מוצר חדש**

**צעדים:**
1. מלא טופס מלא ותקין:
   - שם: "מוצר בדיקה 1"
   - תיאור: "תיאור מלא"
   - מחיר: 100
   - קטגוריה: בחר אחת
   - SKU אחד לפחות
2. לחץ "שמור"

**תוצאות צפויות (כרגע):**
- ❌ שגיאה ב-Console: **404 Not Found** או **405 Method Not Allowed**
- ❌ Error message: "POST http://localhost:3000/api/products 404"

**זה תקין!** כי endpoint לא קיים בשרת.

**בדיקה ב-Redux:**
```javascript
// פתח Redux DevTools
// צריך לראות:
// Action: createProduct/pending
// Action: createProduct/rejected
// Payload: "שגיאה ביצירת המוצר"
```

**✍️ תוצאה:**
- [ ] נכשל כצפוי (404/405) ✅
- [ ] הצליח (לא צפוי!) ❌
- [ ] שגיאה אחרת: ___________

---

### **B. רשימת Endpoints חסרים (לשלב הבא)**

**זיהוי מדויק של מה חסר בשרת:**

1. ✅ **POST /api/products** - יצירת מוצר
   - Body: ProductFormData
   - Response: { success: true, data: Product }

2. ✅ **PUT /api/products/:id** - עדכון מוצר
   - Body: ProductFormData
   - Response: { success: true, data: Product }

3. ✅ **POST /api/products/:id/duplicate** - שכפול מוצר
   - Response: { success: true, data: Product }

4. ✅ **GET /api/products/check-sku?sku=XXX** - בדיקת SKU
   - Query: sku, excludeProductId (optional)
   - Response: { success: true, available: boolean }

5. ⏳ **POST /api/products/upload-images** - העלאת תמונות (Phase 7)
   - Body: FormData with files
   - Response: { success: true, urls: string[] }

---

## 📊 **Phase 6.3.4: בדיקת Edit Flow**

### **A. עריכת מוצר קיים**

**צעדים:**
1. חזור לרשימת המוצרים
2. לחץ "ערוך" על מוצר קיים

**תוצאות צפויות:**
- ✅ ProductForm נפתח במצב edit
- ✅ כל השדות מתמלאים מהמוצר הקיים
- ✅ SKUs קיימים מוצגים
- ✅ כפתורים: "שמור שינויים", "ביטול", "מחק", "שכפל"

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **B. שכפול מוצר**

**צעדים:**
1. בטופס עריכה, לחץ "שכפל מוצר"

**תוצאות צפויות (כרגע):**
- ❌ שגיאה: **POST /api/products/:id/duplicate 404**

**זה תקין!** endpoint לא קיים.

**✍️ תוצאה:**
- [ ] נכשל כצפוי (404) ✅

---

### **C. מחיקת מוצר מהטופס**

**צעדים:**
1. בטופס עריכה, לחץ "מחק מוצר"
2. אשר במודל

**תוצאות צפויות:**
- ✅ מודל אישור: "האם אתה בטוח שברצונך למחוק את המוצר?"
- ✅ לאחר אישור - המוצר נמחק מהרשימה (soft delete)
- ✅ חזרה לרשימה

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

## 🎯 **Phase 6.3.5: בדיקת UX/UI**

### **A. Responsive Design**

**צעדים:**
1. שנה רוחב חלון לגדלים שונים:
   - Desktop: 1920px
   - Tablet: 768px
   - Mobile: 375px

**תוצאות צפויות:**
- ✅ הטופס מתכוונן בצורה חלקה
- ✅ טאבים הופכים ל-dropdown במובייל
- ✅ SKUs מוצגים בעמודה במובייל

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **B. Loading States**

**צעדים:**
1. לחץ "שמור" (גם אם יכשל)
2. שים לב לכפתור

**תוצאות צפויות:**
- ✅ כפתור "שמור" הופך ל-"שומר..." עם spinner
- ✅ כפתור disabled במהלך שמירה
- ✅ לאחר שגיאה - כפתור חוזר למצב רגיל

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

### **C. Error Messages**

**צעדים:**
1. נסה שוב לשמור (כדי לקבל 404)

**תוצאות צפויות:**
- ✅ הודעת שגיאה ברורה למשתמש
- ✅ לא רק "Error" - אלא הסבר מה קרה
- ✅ אפשרות לנסות שוב

**✍️ תוצאה:**
- [ ] עבר
- [ ] נכשל - סיבה: ___________

---

## 📋 **סיכום Phase 6.3**

### **✅ מה עבר:**
- [ ] UI מוצג נכון
- [ ] Form controls עובדים
- [ ] Validation עובד
- [ ] Redux state מתעדכן
- [ ] Navigation בין טאבים עובד
- [ ] SKUs management עובד
- [ ] Auto-save draft עובד
- [ ] Edit mode עובד
- [ ] Delete עובד

### **❌ מה לא עבר (צפוי):**
- [ ] Create product - 404
- [ ] Update product - 404
- [ ] Duplicate product - 404
- [ ] Check SKU availability - 404

---

## 🚀 **הצעד הבא: Phase 1 Backend**

**עכשיו נדע בדיוק מה צריך לבנות בשרת!**

### **רשימת משימות ל-Phase 1:**
1. ✅ יצירת controller methods (4 פונקציות)
2. ✅ יצירת service methods (5 פונקציות)
3. ✅ יצירת validation middleware
4. ✅ הוספת routes חדשים
5. ✅ בדיקה עם Postman/Thunder

**זמן משוער:** 1.5-2 שעות

---

## 📝 **הערות נוספות:**

**תיעוד בעיות:**
- אם נמצאה בעיה - רשום פה:
  1. ___________
  2. ___________
  3. ___________

**שיפורים אפשריים:**
- ___________
- ___________
- ___________

---

**✍️ מבצע הבדיקה:** ___________
**📅 תאריך:** ___________
**⏰ זמן כולל:** ___________

---

**🎉 סיימת את Phase 6.3! מוכן ל-Phase 1 Backend?**
